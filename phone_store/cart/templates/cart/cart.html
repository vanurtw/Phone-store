{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="main-wrapper">
    <div class="breadcrumb-area section-padding-1 bg-gray breadcrumb-ptb-1">
        <div class="container-fluid">
            <div class="breadcrumb-content text-center">
                <div class="breadcrumb-title">
                    <h2>Shopping Cart</h2>
                </div>
            </div>
        </div>
    </div>
    <!-- cart start -->
    <div class="cart-main-area pt-110 pb-120">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                    {% if messages %}
                    {% for i in messages %}
                    <p class="{{i.tags}}">{{i}}</p>
                    {% endfor %}
                    {% endif %}
                    <form action="{% url 'cart_coupon' %}" method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-lg-8">
                                <div class="table-content table-responsive cart-table-content">
                                    <table>
                                        <thead>
                                        <tr>
                                            <th></th>
                                            <th></th>
                                            <th>Product</th>
                                            <th>Memory</th>
                                            <th> Price</th>
                                            <th>Quantity</th>
                                            <th>total</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for item in cart%}

                                        <tr>
                                            <td class="product-remove">
                                                <a href="{% url 'cart_delete' item.id %}">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                         fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
                                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                                                    </svg>
                                                </a>
                                            </td>
                                            <td class="product-img">
                                                <a href="{% url 'product_details' item.prod_slug %}"><img
                                                        src="{{item.img}}" alt="" style="width: 80%;"></a>
                                            </td>
                                            <td class="product-name"><a
                                                    href="{% url 'product_details' item.prod_slug %}"
                                                    style="font-size: 110%;">{{item.name}}</a><br>
                                                {{item.color}}
                                            </td>
                                            <td class="product-price"><span>{{item.memory}} </span>
                                            </td>

                                            <td class="product-price"><span class="amount">₽{{item.price}}</span></td>
                                            <td class="product-price"><span style="padding-left: 20px;">{{item.quantity}} </span>
                                            <td class="product-total"><span>₽{{item.total_price}}</span></td>

                                        </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                <div class="cart-shiping-update-wrapper">
                                    <div class="discount-code">
                                        <input type="text" required="" name="coupon"
                                               placeholder="Enter your coupon code">
                                        <button class="coupon-btn" type="submit">Apply coupon</button>
                                    </div>
                                    <div class="cart-clear">
                                        <a href="{% url 'cart_clear' %}">Clear Cart</a>
                                        <!--                                        <a class="update-cart" href="#">Update cart</a>-->
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="grand-total-wrap">
                                    <h4>Cart Totals</h4>
                                    <div class="grand-total-content">
                                        <ul>
                                            <li>Subtotal <span> ₽{{cart.get_total_price}}</span></li>
                                            <li>Coupon<span>{{cart.cart.discount}}%</span></li>
                                            <!--                                            <li>Shipping-->
                                            <!--                                                <ul>-->
                                            <!--                                                    <li><input type="radio" name="shipping" value="info"-->
                                            <!--                                                               checked="checked">Flat rate: $10-->
                                            <!--                                                    </li>-->
                                            <!--                                                    <li><input type="radio" name="shipping" value="info2">Free shipping-->
                                            <!--                                                    </li>-->
                                            <!--                                                    <li><input type="radio" name="shipping" value="info3">Local pickup-->
                                            <!--                                                    </li>-->
                                            <!--                                                </ul>-->
                                            <!--                                            </li>-->
                                            <li>Total Price <span>₽{{cart.total_price}}</span></li>
                                        </ul>
                                    </div>
                                    <div class="grand-btn">
                                        <a href="{% url 'order' %}">Proceed to checkout</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    {% include 'footer.html' %}


</div>
{% endblock %}